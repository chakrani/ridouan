<div id='can'></div>
<textarea id='collect' cols=10 rows=10 style='display:none;position:fixed;left:0;top:0;width:100%;heigt:100%'></textarea>
<script>


var sliceheight=60;
var slicelength=60;
var lines=new Array();
var dindsf=0;
var tel=0;
var to=0;

var rcxe=new Array();
var rcye=new Array();

var xpose=new Array();
var ypose=new Array();

var telse=new Array();
var uelse=new Array();
var cotelse=0;



function init(){
document.getElementById('collect').value="MkFile 0 1 480\nMTrk\n0 Tempo 500000\n0 Meta TrkEnd\nTrkEnd\n";


tab="<table style='width:100%;height:100%;position:fixed;left:0;top:0' border=0 cellspacing=0 cellpadding=0>";
for(a=0;a<sliceheight;a++){
	ab=new Array();
	tab+"<tr>";
		for(b=0;b<slicelength;b++){
			if(Math.random()>.5){
				ab[b]=true;
				tab+="<td id='x"+a+"y"+b+"' style='background-color:transparent'> </td>";
			}
			else{
				ab[b]=false;
				tab+="<td id='x"+a+"y"+b+"' style='background-color:black'> </td>";				
			}
		}
			lines[a]=ab;
			tab+="</tr>";

	}
	tab+="</table>";
	
	

	
	ftw=new Array();
	ftw[0]=1;
	ftw[1]=-1;
	ftw[2]=0;
	a=0;
	for(r=1;r<(sliceheight-1);r++){
		fdg=lines[r];
		for(s=1;s<(sliceheight-1);s++){
			if(fdg[s]==true){
				rcxe[a]=ftw[Math.floor(Math.random()*ftw.length)];
				rcye[a]=ftw[Math.floor(Math.random()*ftw.length)];
				xpose[a]=r
				ypose[a]=s;
				telse[a]=-1+(Math.random()*2);		
				uelse[a]=-1+(Math.random()*2);					
				a++;
			}
		}
	}	
	document.getElementById('can').innerHTML=tab;
}

function doLive(){

for(t=0;t<xpose.length;t++){



	if(xpose[t]<1  || xpose[t]>sliceheight){
		rcxe[t]=rcxe[t]*-1;

	}

	if(ypose[t]<1  || ypose[t]>sliceheight){
		rcye[t]=rcye[t]*-1;

	}

	xpose[t]=(xpose[t]+(telse[t]*rcxe[t]));
	ypose[t]=(ypose[t]+(uelse[t]*rcye[t]));



}

lines=new Array();
for(n=0;n<xpose.length;n++){
	h=new Array();
	for(o=0;o<xpose.length;o++){
		h[o]=false;
	}
	lines[n]=h;
}


for(ree=0;ree<xpose.length;ree++){
	xw=Math.floor(xpose[ree]);
	yw=Math.floor(ypose[ree]);
	
	lines[xw][yw]=true;

}

/*
res=new Array();
to++;
arr=lines[0];
ap=new Array();
	for(b=0;b<slicelength;b++){
	ap[b]=arr[b];
}
res[0]=ap;
arr=lines[(lines.length-1)];
ap=new Array();
	for(b=0;b<slicelength;b++){
	ap[b]=arr[b];
}
res[(lines.length-1)]=ap;




for(a=1;a<(sliceheight-1);a++){
	arrb=lines[(a-1)];
	arro=lines[(a+1)];
	
	arr=lines[a];



	ter=new Array();
	for(b=1;b<(slicelength-1);b++){
			
			l=arr[(b-1)];
			lb=arrb[(b-1)];
			lo=arro[(b-1)];
			r=arr[(b+1)]
			rb=arrb[(b+1)];
			ro=arro[(b+1)]
			o=arro[b];
			be=arrb[b];
			c=arr[b];

			living=0;
			if(l==true){
				living+=1;
			}
			if(lb==true){
				living+=1;
			}
			if(lo==true){
				living+=1;
			}
			if(r==true){
			living+=1;
			}
			if(ro==true){
			living+=1;
			}
			if(rb==true){
			living+=1;
			}
			if(o==true){
			living+=1;
			}
			if(be==true){
			living+=1;
			}
			niw=c;


		if(c==true && (living==0 || living==1)){
		niw=false;
		}
		if(c==true && living>=4){
		niw=false;
		}
		if(c==true && ( (living==2) || (living==3) )){
		niw=true;
		}
		
		if(c==false &&(  (living==3) )){
		niw=true;
		}
		
			ter[b]=niw;
	}
	
	ter[0]=arr[0];
	
	ter[(slicelength-1)]=arr[(slicelength-1)];
	res[a]=ter;
}

*/

for(a=0;a<sliceheight;a++){
	ab=lines[a];
	sdf=new Array();
		for(b=0;b<slicelength;b++){
		sdf[b]=ab[b];
		d=document.getElementById('x'+a+'y'+b);
		if(ab[b]==false){
			d.style.backgroundColor="transparent";
		}
		else{
		d.style.backgroundColor="black";
		}
	}
	//lines[a]=sdf;
}





tel++;
setTimeout("doLive()", 80);
}
init();
doLive();





</script>